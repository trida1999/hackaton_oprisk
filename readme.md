# Агент для анализа отзывов о банковских отделениях

## Обзор

Этот проект реализует систему с несколькими агентами на основе больших языковых моделей (LLM) для анализа клиентских отзывов о банковских отделениях. Система выявляет операционные риски, оценивает качество обслуживания и формирует комплексные отчеты для принятия управленческих решений.

## Основные возможности

- **Архитектура с несколькими агентами** со специализированными ролями
- **Идентификация операционных рисков** на основе методологии ЦБ (716-П)
- **Анализ тональности** клиентских отзывов
- **Автоматическое формирование отчетов** для руководства
- **Контроль качества** через специального агента-критика
- **Итеративный процесс улучшения** отчетов

## Архитектура

### Компоненты системы

1. **Уровень данных**:
   - Кэширование файлов для эффективного доступа
   - Поддержка нескольких форматов (JSON, RTF, текстовые)
   - Источники данных:
     - Клиентские отзывы (`reviews3.json`)
     - Информация об отделениях (`companies3.json`)
     - Нормативные документы (`716p.txt`)
     - База недобросовестных практик (`wrongPractices.txt`)

2. **Уровень агентов**:
   - Специализированные агенты с четкими ролями
   - Инструменты для доступа к данным и анализа
   - Иерархическое делегирование задач

3. **Уровень процессов**:
   - Последовательное выполнение задач
   - Цикл итеративного улучшения с контролем качества
   - Сохранение контекста между итерациями

### Роли агентов

| Агент | Роль | Обязанности |
|-------|------|-------------|
| Старший аналитик | Анализ данных | Агрегация метрик, выявление тенденций |
| Риск-ассистент | Выявление рисков | Обнаружение операционных рисков |
| Агент инсайтов | Ключевые выводы | Анализ сильных/слабых сторон отделений |
| Построитель отчетов | Формирование отчетов | Создание структурированных отчетов |
| Критик | Контроль качества | Проверка полноты и точности отчетов |

## Технологии агентов

### Основные технологии

1. **Фреймворк CrewAI**:
   - Оркестрация агентов
   - Управление задачами
   - Взаимодействие между агентами

2. **Интеграция с LangChain**:
   - Работа с LLM
   - Интеграция инструментов
   - Шаблоны запросов

3. **OpenAI/OpenRouter**:
   - Исполнение LLM
   - Гибкость выбора моделей
   - Контроль "температуры" вывода

### Уровень автономности агентов

Система демонстрирует **3 уровень** автономности по 6-уровневой шкале:

1. **Доступ к информации**: 100% 
2. **Принятие решений**: 80% 
3. **Выполнение задач**: 90% 
4. **Обучение**: 30% 
5. **Координация**: 100% 
6. **Самосовершенствование**: 10% 

Расчетный балл автономности:
```
(1.0*25 + 0.8*20 + 0.9*20 + 0.3*15 + 1.0*15 + 0.1*5) = 72.5/100
```

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/your-repo/bank-comment-analysis.git
cd bank-comment-analysis
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

3. Настройте переменные окружения:
```bash
cp .env.example .env
```
Отредактируйте `.env`:
```
MODEL_NAME=ваша-модель
API_KEY=ваш-api-ключ
```

## Использование

Запустите анализ:
```python
python main.py
```

### Настройка анализа

Измените вопрос анализа в `main.py`:
```python
result = analyze_bank_reviews("Ваш вопрос для анализа")
```

## Требования к данным

Разместите файлы данных:
```
project_root/
├── data/
│   ├── reviews3.json         # Клиентские отзывы
│   ├── companies3.json       # Данные отделений
│   ├── 716p.txt             # Методология рисков
│   └── wrongPractices.txt   # Недобросовестные практики
```

## Настройки

### Параметры LLM

Настройте в коде:
```python
llm = ChatOpenAI(
    model=os.getenv("MODEL_NAME"),  
    temperature=0.3,               
    # ... другие параметры
)
```

### Кэширование

Система использует кэш в памяти. Для изменения:
```python
FILE_CACHE: Dict[str, Any] = {} 
```

## Результаты работы

Система формирует:
1. Лог выполнения в консоли
2. Итоговый отчет в `report_output.txt`
3. Обратную связь по итерациям

## Ограничения

1. Ограничения контекста LLM
2. Статическая база знаний
3. Анализ только структурированных данных

## Участие в проекте

1. Форкните репозиторий
2. Создайте ветку для новой функции
3. Отправьте pull request

## Лицензия

[MIT License](LICENSE)

## Планы развития

1. Интеграция с БД
2. Динамическое обучение
3. Веб-интерфейс
4. Многоязычная поддержка
5. Мониторинг в реальном времени

## Контакты

По вопросам: [ORM]